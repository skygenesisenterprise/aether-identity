# Dockerfile.dev pour Prisma - Migrations et Studio
FROM node:20-alpine

WORKDIR /app

# Installer les dependances systeme
RUN apk add --no-cache libc6-compat openssl postgresql-client

# Installer pnpm
RUN npm install -g pnpm@10.28.1

# Copier package.json
COPY package.json ./

# Installer les dependances
RUN pnpm install

# Copier les fichiers Prisma
COPY . .

# Installer Prisma CLI globalement pour s'assurer qu'il est disponible
RUN npm install -g prisma

# Commande par defaut
CMD ["sh"]
